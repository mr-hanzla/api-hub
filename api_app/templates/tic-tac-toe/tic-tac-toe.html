{% extends 'base.html' %}

{% block title %} Tic-Tac-Toe {% endblock title %}

{% block content %}
<h1><span class="badge bg-success">Tic Tac Toe</span></h1>

<button type="button" id="player" onclick="changePlayer()" class="btn btn-primary">X</button><br>
<button type="button" id="input-button" onclick="clearBoard()" class="btn btn-dark">Clear Board</button>

<table class="table table-bordered border-primary">
    {% for i in range(3) %}
        <tr style="text-align: center;">
        {% for j in range(3) %}
            <td id="cell-{{ i }}-{{ j }}" onclick="updateCellText(this.id)">-</td>
        {% endfor %}
    {% endfor %}
</table>
{% endblock content %}

{% block scripts %}
<script>
    function updateCellText(id) {
        document.querySelector(`#${id}`).innerText = getPlayer();
        changePlayer();
    }

    function getPlayer() {
        return document.querySelector("#player").innerText;
    }

    function changePlayer() {
        let playerButton = document.querySelector("#player");
        if (playerButton.innerText == "X") {
            playerButton.innerText = "O";
        } else {
            playerButton.innerText = "X";
        }
    }

    function clearBoard() {
        for (i=0; i<3; i++) {
            for (j=0; j<3; j++) {
                document.querySelector(`#cell-${i}-${j}`).innerText = '-';
            }
        }
    }
</script>
{% endblock scripts %}
